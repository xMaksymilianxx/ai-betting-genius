<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß† AI Betting Genius Ultimate</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #fff; min-height: 100vh; padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 3.5em; margin-bottom: 5px; 
                     background: linear-gradient(135deg, #7c3aed, #ec4899);
                     -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header p { color: #94a3b8; font-size: 1.3em; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px; margin-bottom: 30px; }
        .stat-card { background: rgba(124, 58, 237, 0.1); padding: 20px; border-radius: 15px;
                    border: 1px solid rgba(124, 58, 237, 0.3); text-align: center; }
        .stat-value { font-size: 2.5em; font-weight: bold; color: #7c3aed; }
        .stat-label { color: #94a3b8; margin-top: 5px; }
        .controls { background: rgba(30, 41, 59, 0.8); padding: 30px; border-radius: 20px;
                   margin-bottom: 30px; backdrop-filter: blur(10px); }
        .slider-container { margin-bottom: 25px; }
        .slider-container label { display: block; margin-bottom: 15px; color: #cbd5e1;
                                 font-size: 1.1em; font-weight: 600; }
        .slider { width: 100%; height: 10px; border-radius: 5px; 
                 background: linear-gradient(to right, #7c3aed, #ec4899);
                 outline: none; -webkit-appearance: none; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; width: 28px; height: 28px;
                                       border-radius: 50%; background: #fff; cursor: pointer;
                                       box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4); }
        .value-display { display: inline-block; background: rgba(124, 58, 237, 0.2);
                        padding: 12px 30px; border-radius: 12px; font-size: 2em;
                        font-weight: bold; margin-left: 20px; color: #7c3aed; }
        .btn { background: linear-gradient(135deg, #7c3aed 0%, #ec4899 100%);
              border: none; color: white; padding: 25px 50px; font-size: 1.4em;
              border-radius: 15px; cursor: pointer; width: 100%; font-weight: bold;
              transition: all 0.3s; box-shadow: 0 8px 24px rgba(124, 58, 237, 0.4); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 12px 32px rgba(124, 58, 237, 0.6); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .loading { text-align: center; padding: 60px; font-size: 1.5em; color: #94a3b8; }
        .results { display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 25px; }
        .match-card { background: rgba(30, 41, 59, 0.8); border-radius: 20px; padding: 25px;
                     border-left: 5px solid #7c3aed; backdrop-filter: blur(10px);
                     transition: all 0.3s; }
        .match-card:hover { transform: translateY(-5px); box-shadow: 0 12px 32px rgba(124, 58, 237, 0.3); }
        .match-header { margin-bottom: 20px; }
        .match-title { font-size: 1.5em; font-weight: bold; margin-bottom: 8px; }
        .match-info { color: #94a3b8; font-size: 1em; display: flex; justify-content: space-between; }
        .match-score { font-size: 3em; font-weight: bold; text-align: center;
                      margin: 20px 0; color: #7c3aed; }
        .xg-bar { display: flex; gap: 10px; margin: 15px 0; align-items: center; }
        .xg-value { font-size: 0.9em; color: #94a3b8; min-width: 40px; }
        .confidence-badge { background: linear-gradient(135deg, #7c3aed, #ec4899);
                           padding: 15px 25px; border-radius: 12px; text-align: center;
                           margin-bottom: 20px; font-size: 1.3em; font-weight: bold; }
        .signal { background: rgba(15, 23, 42, 0.6); padding: 15px; border-radius: 12px;
                 margin-bottom: 12px; border-left: 3px solid #ec4899; }
        .signal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .signal-type { font-weight: bold; font-size: 1.1em; }
        .signal-accuracy { background: rgba(124, 58, 237, 0.3); padding: 5px 15px;
                          border-radius: 8px; color: #7c3aed; font-weight: bold; }
        .signal-reason { color: #94a3b8; font-size: 0.95em; margin-top: 5px; }
        .signal-algo { color: #64748b; font-size: 0.85em; margin-top: 5px;
                      font-family: 'Courier New', monospace; }
        .no-results { text-align: center; padding: 80px 20px; }
        .no-results h2 { font-size: 2.5em; margin-bottom: 15px; }
        .no-results p { color: #94a3b8; font-size: 1.3em; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† AI Betting Genius Ultimate</h1>
            <p>Advanced Multi-Algorithm Intelligence System</p>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="matchCount">-</div>
                <div class="stat-label">Matches Found</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgConfidence">-</div>
                <div class="stat-label">Avg Confidence</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="apiCount">-</div>
                <div class="stat-label">APIs Active</div>
            </div>
        </div>
        
        <div class="controls">
            <div class="slider-container">
                <label>üéØ Minimum Confidence Level</label>
                <input type="range" min="0" max="100" value="0" class="slider" id="slider">
                <span class="value-display" id="value">0%</span>
            </div>
            <button class="btn" id="btn" onclick="analyze()">
                üöÄ Analyze Live Matches
            </button>
        </div>
        
        <div id="results"></div>
    </div>

    <script>
        const slider = document.getElementById('slider');
        const value = document.getElementById('value');
        const results = document.getElementById('results');
        const btn = document.getElementById('btn');

        slider.oninput = () => value.textContent = slider.value + '%';

        async function analyze() {
            btn.disabled = true;
            results.innerHTML = '<div class="loading">üîç Analyzing live matches from multiple sources...</div>';
            
            try {
                const res = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({minConfidence: parseInt(slider.value)})
                });
                
                const data = await res.json();
                
                if (!data.success || !data.results || data.results.length === 0) {
                    results.innerHTML = `
                        <div class="no-results">
                            <h2>‚è∞ No live matches</h2>
                            <p>${data.message || 'Peak hours: 18:00-22:00 CEST'}</p>
                        </div>`;
                    updateStats(0, 0, 0);
                } else {
                    displayResults(data.results);
                    const avgConf = Math.round(data.results.reduce((a,b)=>a+b.confidence,0)/data.results.length);
                    updateStats(data.matches_found, avgConf, data.sources_used?.length || 1);
                }
            } catch (error) {
                results.innerHTML = `
                    <div class="no-results">
                        <h2>‚ùå Connection Error</h2>
                        <p>${error.message}</p>
                    </div>`;
                updateStats(0, 0, 0);
            }
            
            btn.disabled = false;
        }

        function updateStats(matches, conf, apis) {
            document.getElementById('matchCount').textContent = matches;
            document.getElementById('avgConfidence').textContent = conf + '%';
            document.getElementById('apiCount').textContent = apis;
        }

        function displayResults(matches) {
            results.innerHTML = '<div class="results">' + 
                matches.map(m => `
                    <div class="match-card">
                        <div class="match-header">
                            <div class="match-title">‚öΩ ${m.home_team} vs ${m.away_team}</div>
                            <div class="match-info">
                                <span>üèÜ ${m.league}</span>
                                <span>‚è∞ ${m.minute}'</span>
                            </div>
                        </div>
                        <div class="match-score">‚öΩ ${m.home_goals}-${m.away_goals}</div>
                        <div class="xg-bar">
                            <span class="xg-value">üìà xG:</span>
                            <span style="flex:1;color:#94a3b8;font-weight:bold;">${m.home_xg} - ${m.away_xg}</span>
                        </div>
                        <div class="confidence-badge">
                            ${m.confidence}% Confidence
                        </div>
                        ${m.signals.map(s => `
                            <div class="signal">
                                <div class="signal-header">
                                    <div class="signal-type">${s.type}</div>
                                    <div class="signal-accuracy">üìä ${s.accuracy}%</div>
                                </div>
                                <div class="signal-reason">${s.reasoning}</div>
                                <div class="signal-algo">Algorithm: ${s.algorithm}</div>
                            </div>
                        `).join('')}
                    </div>
                `).join('') + '</div>';
        }
    </script>
</body>
</html>
